<!-- Simple Code Block with Copy Button -->
<div class="code-block-wrapper relative group">
    <div
        class="bg-gray-900 dark:bg-gray-950 text-gray-300 p-6 rounded-lg font-mono text-sm border border-gray-800 overflow-x-auto">
        <button onclick="copyCodeBlock(this)"
            class="absolute top-4 right-4 px-3 py-1.5 bg-gray-800 hover:bg-gray-700 text-gray-300 text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2">
            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">
                </path>
            </svg>
            <span class="copy-text">Copy</span>
        </button>
        <pre><code class="language-<%= language || 'javascript' %>"><%- code %></code></pre>
    </div>
</div>

<script>
    function copyCodeBlock(btn) {
        const codeBlock = btn.closest('.code-block-wrapper').querySelector('code');
        const code = codeBlock.textContent;

        navigator.clipboard.writeText(code.trim()).then(() => {
            const textSpan = btn.querySelector('.copy-text');
            textSpan.textContent = 'Copied!';
            btn.classList.add('bg-green-600');

            setTimeout(() => {
                textSpan.textContent = 'Copy';
                btn.classList.remove('bg-green-600');
            }, 2000);
        });
    }
</script>